<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receitas</title>

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<script>

  $(document).ready(function () {
      $('#receitasTable').DataTable({
          "paging": true,
          "language": {
                "search": "Pesquisar:",
                "lengthMenu": "Mostrar _MENU_ itens por página",
                "info": "Mostrando _START_ a _END_ de _TOTAL_ entradas",
                "infoEmpty": "Mostrando 0 a 0 de 0 entradas",
                "infoFiltered": "(filtrado de _MAX_ total de entradas)",
                "paginate": {
                    "first": "Primeiro",
                    "last": "Último",
                    "next": "Próximo",
                    "previous": "Anterior"
                },
                "emptyTable": "Nenhuma receita encontrada"
              }
      });
  })


</script>

<body class="bg-gray-100">

  @if(auth.isAuthenticated)
  <p> {{ auth.user.email }} </p>
    <div class="container mx-auto px-4 py-8">
        <h1 class="text-3xl font-bold mb-4">Receitas</h1>

        <form action="/" method="GET" class="mb-4">
            <div class="flex items-center">
                <input type="text" id="ingredients" name="ingredients" placeholder="Digite os ingredientes" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-blue-400">
                <button type="submit" class="ml-2 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:bg-blue-600">Pesquisar</button>
            </div>
        </form>
        <table id="receitasTable" class="w-full border-collapse border border-gray-300">
            <thead>
                <tr class="bg-gray-200">
                    <th class="p-2">Título</th>
                    <th class="p-2">Link</th>
                    <th class="p-2">Dificuldade</th>
                    <th class="p-2">Categoria</th>
                    <th class="p-2">Serve(pessoas)</th>
                    <th class="p-2">Duração</th>
                    <th class="p-2">Tipo de Prato</th>
                    <th class="p-2">Descrição</th>

                </tr>
            </thead>
            <tbody>
              @each (recipe in recipes)
              <tr class="hover:bg-gray-100">
                  <td class="p-2">{{ recipe.title }}</td>
                  <td class="p-2 relative">
                      <a href="{{ recipe.link }}" target="_blank">{{ recipe.link }}</a>
                  </td>
                  <td class="p-2">{{ recipe.difficulty }}</td>
                  <td class="p-2">{{ recipe.category }}</td>
                  <td class="p-2">{{ recipe.servings }}</td>
                  <td class="p-2">{{ recipe.duration }}</td>
                  <td class="p-2">{{ recipe.dishType }}</td>
                  <td class="p-2">{{ recipe.description }}</td>
              </tr>
              @endif
              @endeach
          </tbody>

        </table>
    </div>
@endif

</body>
</html>
